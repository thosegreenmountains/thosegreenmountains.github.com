//////////////////////////////////////
// Config
//////////////////////////////////////

 @import 'config';

//////////////////////////////////////
// Fonts
//////////////////////////////////////

 @import url(http://fonts.googleapis.com/css?family=Raleway:800|Cutive);

//////////////////////////////////////
// Global
//////////////////////////////////////

@include establish-baseline;

* {
  @include box-sizing(border-box);
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  font-family: 'Cutive', serif;
  position: relative;
  -webkit-font-smoothing: antialiased;
  @include background(
    url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEV/f39/f39JSUmqqqptbW3m5uYzMzOpqalwcHC2traUlJQnJyfBwcFsbGxJSUmlpaVgYGCAgIBqamoAAAAAAAD///8AAAAAAAAAAAD///////////////8AAAD///8AAAA2VInhAAAAIHRSTlMKAgcDBwcFBAgICQYFCQgHAwsFBQMGAQYCBQQCAQQDAOGbKK4AAAT0SURBVEgNBcEJgqMwDABBb0IgQIABn7Il9f9/uVVhlib/TgKxSv1p/krXlSJxMXTzb+vj7OmxITf5jhquPiJ1oThyK5mjq2enMm2ldBHyaLUmjtRMIXyIqRCR8iMaaYxcjOH8/vC4rjh7vyc/SGM0CNzoszciHbbE4L6TJKcYdv1AHjrIWfAPIkFHoQC9f99AijBDNedzGy0jWS+/Uro00SHoDWwDTBHuXoELCdhPGoWIxFqJvOQ7hBjyveU6EiyZ5KhX0qrAla9mY6LYAYXcqRkkcI/A4J4T2RtxDE/9UmISkcJfEyvUMaoB5B7IS88CpDryhfM81gXaKbu2ZYWSvpzR5smMQuAk5/Q3kuzc0OnDJ0qjp8Gl3FjZdWF55qnWIwc40WyiCVGgQzsMwFpO1LrJQmnJJj8oaCi9dWecR6nWZ5cb/OaB9ruGyfOVqsrViYc/MIXB72Lm2z2tO22xUVcKmnNk6OYLeIlPK9ho7WyB1VjvqRz1XSpcMsqm9M4Y5TaWf+s7JaohM0sfI/SXVMzJe1OHJnh7jwkYgMdv3PKdGdDGmlgCfKFyLfUWqP/60nXKwLA2qGSsNeiFrKQphmSWXxQ0CXJB4UIu6AGgNgEavORcpOA9YLzyx5dkkP7q4Cn9HjxTifjGjf+A3OwHVv8IZO9wNQRmQe9KbJ+FaJ3iwHc02JxYq/RB8D4UJ8dv3IhIZzRviUbcWsqaJTcxAEzBw5e2PAiGlqDOsDf5A7knVntw2HOig94lQUD3JZ2veaH2jGFq4v1UFj54lZiadEadGhWSBMggRear365+swEYb+p1jgha/4lGQA6JzxZ+zC5/HPCCYfjRIYrrt92lJs4MDWjHqKN2QueXefNVp0FrFbttnhq7qYJdaDpOX/bVDpwrwJ2pkx3v+XNzni7ZZi9JRulT1XY6Fco9d8qhvINCZwIno8xSl7UeuI3+3Vn/XTA2KK8O3QqE/cIZecIq5ZM7KFDbTV56lkiB16fzLeMp/SrB/1ajz3EADybf/QuIRDop7uQeez+5smHl4goXumOlD2PoXLFN3Y3YAc6OzxdgJHJessTgTePwCJjoAX1nEJdjqU/fgQa0yEnFMUqA9G+ioAyYyffRgB3n312YUpOqSqJP1HNWggSJ7AjR0hg0IuQrX8PjrFBYrjwXqXBuHfcADKy/h8HedvkrZsglvGRAgtYEzQu0C/0SkHKiI1008pxKLHPjYErN683e/oRzpfOwdN/ZwjC5AXoVhl0DNh5VLeiX0aDUN0uKXM530Vf44rEPiSRn/dd0KsmkOmMZxDoSTDj3J9/2prUzVOOvpF96qAbmDeEEplZL9wFxK1A+VHhUCKl/0PSQs+lAZrKVXo+xuAFXHKX/IxPR/Sn+0pAG2cGhxS86sjXS56wzLb+vNFneKdkTjMX59dA7ynE49wxPG2Ra0zWXOqk8Ax5sNGAkBpnwMRw+bfBKSfDIaX6QhBWSA3dPDeDJ6zIRSkZlBfjBtW8Mqns+JwOoha8dXqhULKa6h6RyHq2PceC8b2G7mlYgqW6c1QDQuka86GyBGYuH44WD7ul1dohdT1kx38pDK70PLu8XqoRBgwT02tc2cH1ozTCK3egCyq7AhdL9DBu9269nl2+b67Gt3DjGjMngFEr/QOW4miJew3s4QG12OAB9gvqXROLTBG962kVrWUkN5T/LM9TJitqLyQAAAABJRU5ErkJggg==),
    linear-gradient($body-gradient)
  );
}

#{headings()} {
  font-family: 'Raleway', sans-serif;
  font-weight: 800;
}

p {
  margin: 0 0 1em 0;
  @include adjust-leading-to(1);
}

a {
  @include link-colors(lighten(#333, 5%), lighten(#333, 10%));
}

//////////////////////////////////////
// COMMON LAYOUT
//////////////////////////////////////

#header {

  h1 {
    margin: -297px auto 0;
    width: 200px;
    height: 594px;
    @include replace-text('logo.svg');
  }

}

//////////////////////////////////////
// SIMPLE LAYOUT
//////////////////////////////////////

[data-layout="simple"] {
  
  #header {
    h1 {
      margin-top: -307px;
    }
  }
  // Force the HTML and BODY
  // elements to only be 100%
  &, body {
    width: auto;
    height: auto;
    overflow: visible;
    color: #444;
  }

  body {
    padding: 0 20px;
  }

  // Hide the navigation, the page is
  // too short for it to be important.
  #navigation {
    display: none;
  }

  // Intro
  .intro {
    max-width: 500px;
    text-align: center;
    margin-right: auto;
    margin-left: auto;
    @include leader;
    @include trailer;
  }

  // Hide the progress bar
  .progress {
    display: none;
  }

  // Hide the extra link in the footer
  .overlay__hide {
    display: none;
  }

  // Logos
  .details__heading {

    img {
      width: 100%;
      display: block;
      margin: 0;
    }

    span {
      display: block;
      @extend %hide;
    }

  }

}

//////////////////////////////////////
// ENHANCED LAYOUT
//////////////////////////////////////

[data-layout="enhanced"] {

  // Logomark

  body::after {
    content: '';
    display: block;
    margin: 0;
    position: absolute;
    top: 0;
    left: 5%;
    width: $logo-small-width;
    height: 140px;
    opacity: 0;
    @include replace-text('logo.svg', 0, bottom);
    @include background-size(cover);
  }

  //////////////////////////////////////
  // CONTAINER
  //////////////////////////////////////

  #mountains {
    position: absolute;
    width: 100%;
    // min-width: 900px;
    height: 100%;
    top: 0;
    left: 0;
    overflow: visible;
    z-index: 5;
    @include transition-property(opacity top height);
    @include transition-duration(2s 3s 1s);
    @include transition-timing-function(ease-in-out);
    @include transition-delay(0 1s 0);
  }

  // Global Slide Options

  .level,
  .slide {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
    @include transform-style(preserve-3d);
    @include transition-property(opacity transform);
    @include transition-duration(1s);
    @include transition-timing-function(cubic-bezier(0.260, 0.860, 0.440, 0.985));
    @include backface-visibility(hidden);
  }

  // Levels

  .level {

    &.present {
      display: block;
      opacity: 1;
      @include transform(translate(0, 0));
    }

    &.past {
      display: block;
      opacity: 0;
      @include transform(translate(0, -100%));
    }

    &.future {
      display: block;
      opacity: 0;
      @include transform(translate(0, 100%));
    }

    .slide {

      &.present {
        display: block;
        opacity: 1;
      }

    }

  }

  // Slides

  .slide {

    > img {
      margin: 20px;
    }

    &.past {
      display: block;
      opacity: 0;
      @include transform(translate(-100%, 0));
    }

    &.future {
      display: block;
      opacity: 0;
      @include transform(translate(100%, 0));
    }

    > section {

      &.present {
        display: block;
        opacity: 1;
      }

    }

  }

  // Sections

  .slide > section {

    text-align: left;
    min-height: 300px;

    &.past {
      display: block;
      opacity: 0;
      @include transform(translate(-100%, 0));
    }

    &.future {
      display: block;
      opacity: 0;
      @include transform(translate(100%, 0));
    }

  }

  //////////////////////////////////////
  // HEADER
  //////////////////////////////////////
  
  #header {

    h1 {
      @extend %fadeInDown;
      -webkit-animation-delay: 1s;
      -moz-animation-delay: 1s;
      -o-animation-delay: 1s;
      animation-delay: 1s;
    }

  }

  .intro {
    @extend %fadeInUp;
    width: $intro-width;
    max-width: 90%;
    margin: 0 auto;
    position: absolute;
    bottom: ($nav-arrow-edge-offset * 2) + $nav-arrow-size;
    left: 50%;
    margin-left: -($intro-width/2);
    color: white;
    -webkit-animation-delay: 3s;
    -moz-animation-delay: 3s;
    -o-animation-delay: 3s;
    animation-delay: 3s;

    a { @include link-colors(white, #ddd); }

  }

  .intro__heading {
    font-weight: bold;
    text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.4);
    @include adjust-font-size-to(28px, 1.5);
  }

  .intro__navigation {
    margin: 0 auto;
    text-align: center;
    width: 420px;
    @include adjust-font-size-to(14px);
  }

  //////////////////////////////////////
  // Navigation
  //////////////////////////////////////

  #navigation {
  
    h1, span {
      @extend %hide;
      display: block;
    }

    a {
      position: relative;
      display: block;
      height: 100%;
      width: 100%;
    }

    img {
      position: absolute;
      top: 50%;
      left: 50%;
      margin-left: -200px;
      margin-top: -200px;
    }

    .slide {
      padding-bottom: $progress-bar-height;
    }

  }

  //////////////////////////////////////
  // DETAIL SLIDES
  //////////////////////////////////////

  .details {
    max-height: 100%;
    overflow-y: auto;
    padding-top: ($nav-arrow-edge-offset * 2) + $nav-arrow-size;
    padding-bottom: $progress-bar-height;
    color: white;
  }

  .details__wrapper {
    padding: 40px;
    width: 90%;
    max-width: 800px;
    min-height: 100%;
    margin: 0 auto;
    background: rgba(0, 0, 0, 0.2);
    @include box-shadow(inset 0 0 20px -3px rgba(0, 0, 0, 0.2));
  }

  .details__heading {
    font-family: 'Raleway', sans-serif;
    font-weight: 800;
    text-align: left;
    text-transform: uppercase;
    margin-top: 0;
    margin: 0;
    @include adjust-font-size-to(44px);

    img {
      display: inline-block;
      vertical-align: middle;
      margin-right: rhythm(0.25);
    }
  }

  .details__content {
    height: 100%;
    @include padding-leader(1);
  }

  //////////////////////////////////////
  // INFO OVERLAY
  //////////////////////////////////////

  .overlay {
    // @extend %animation;
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    background: white;
    background: rgba(255, 255, 255, 0.8);
    z-index: 100;
  }

  .overlay__content {
    display: none;
    position: absolute;
    padding: 20px;
    top: 0;
    max-width: 800px;
    background: white;
    z-index: 200;
    color: #666;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.1);
  }

  .overlay__hide {
    position: absolute;
    text-indent: 200%;
    overflow: hidden;
    white-space: nowrap;
    width: 20px;
    height: 20px;
  }

  //////////////////////////////////////
  // BACKGROUNDS
  //////////////////////////////////////

  .bg {
    
    height: 100%;
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    text-indent: -150%;
    
    * {
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      bottom: 0;
      opacity: 0;
      background-position: center top;
      background-repeat: no-repeat;
      @include transition-property(opacity);
      @include transition-timing-function(cubic-bezier(0.260, 0.860, 0.440, 0.985));
      @include transition-duration(6s);
    }

    // Horizontal levels

    &[data-level-h="2"] {
      .bg__back { left: -9%; }
      .bg__mid { left: -3%; }
    }
    &[data-level-h="3"] {
      .bg__back { left: -10%; }
      .bg__mid { left: -6%; }
    }
    &[data-level-h="4"] {
      .bg__back { left: -11%; }
      .bg__mid { left: -9%; }
    }
    &[data-level-h="5"] {
      .bg__back { left: -12%; }
      .bg__mid { left: -12%; }
    }
    &[data-level-h="6"] {
      .bg__back { left: -13%; }
      .bg__mid { left: -15%; }
    }
    &[data-level-h="7"] {
      .bg__back { left: -14%; }
      .bg__mid { left: -18%; }
    }
    &[data-level-h="8"] {
      .bg__back { left: -15%; } 
      .bg__mid { left: -21%; }
    }

  }

  .bg__back {
    z-index: 1;
    height: image-height('bg/back.png');
    background-image: image-url('bg/back.png');
    background-size: cover;
    opacity: 0.4;
    width: 116%;
    left: -8%;
  }

  .bg__mid {
    z-index: 2;
    height: image-height('bg/mid.png');
    background-image: image-url('bg/mid.png');
    background-size: cover;
    opacity: 0.6;
    width: 121%;
    left: 0%;
  }

  .bg__fore {
    z-index: 3;
    height: image-height('bg/fore.png');
    background-image: image-url('bg/fore.png');
    background-size: cover;
    opacity: 0.7;
  }

  //////////////////////////////////////
  // PROGRESS
  //////////////////////////////////////

  .progress {

    position: fixed;
    bottom: -$progress-bar-height;
    left: 0;
    width: 100%;
    background: white;
    opacity: 1;
    z-index: 20;

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      float: right;
      width: $progress-bar-nav-width;
      height: 100%;
      overflow: hidden;
    }

    li {
      text-align: center;
      display: inline-block;
      width: 50%;
      height: $progress-bar-height;
      margin-right: -4px;
      vertical-align: middle;
      position: relative;
      border-left: 1px solid #b2b2b3;
    }

    a, span {
      display: block;
      text-decoration: none;
      text-transform: uppercase;
      color: #6d6e70;
      font-family: 'Raleway', sans-serif;
      font-weight: 800;
      @include adjust-font-size-to(18px, $progress-bar-line-height);
    }

  }

  .nav-arrow__up {
    left: 50%;
    top: $nav-arrow-edge-offset;
    margin-left: $nav-arrow-size / -2;
    @include background(image-url('arrow-up.svg') center center no-repeat);

    &:hover {
      margin-top: -1px;
    }
    &:active {
      margin-right: -1px;
    }
  }

  .nav-arrow__right {
    right: $nav-arrow-edge-offset;
    top: 50%;
    margin-top: $nav-arrow-size / -2;
    @include background(image-url('arrow-right.svg') center center no-repeat);

    &:hover {
      margin-right: -1px;
    }
    &:active {
      margin-bottom: -1px;
    }
  }

  .nav-arrow__down {
    bottom: $nav-arrow-edge-offset;
    left: 50%;
    margin-left: $nav-arrow-size / -2;
    @include background(image-url('arrow-down.svg') center center no-repeat);

    &:hover {
      margin-bottom: -1px;
    }
    &:active {
      margin-right: -1px;
    }
  }

  .nav-arrow__left {
    left: $nav-arrow-edge-offset;
    top: 50%;
    margin-top: $nav-arrow-size / -2;
    @include background(image-url('arrow-left.svg') center center no-repeat);

    &:hover {
      margin-left: -1px;
    }
    &:active {
      margin-bottom: -1px;
    }
  }

  .nav-arrow__up,
  .nav-arrow__right,
  .nav-arrow__down,
  .nav-arrow__left {
    position: absolute;
    display: block;
    width: $nav-arrow-size;
    height: $nav-arrow-size;
    cursor: pointer;
    z-index: 30;
    opacity: 0;
    @include transition-property(opacity top bottom);
    @include transition-duration(1s);
    @include transition-timing-function(ease);
    @include background-size(cover);
  }

  .arrows {
    width: $arrows-width;
    height: $arrows-height;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-left: -($arrows-width/2);
    margin-top: -($arrows-height/2);

    &.up {
      .arrow__up {
        border-bottom-color: $arrow-active-fill;
      }
    }

    &.right {
      .arrow__right {
        border-left-color: $arrow-active-fill;
      }
    }

    &.down {
      .arrow__down {
        border-top-color: $arrow-active-fill;
      }
    }

    &.left {
      .arrow__left {
        border-right-color: $arrow-active-fill;
      }
    }

    .arrow__up, .arrow__right,
    .arrow__down, .arrow__left {
      width: 0;
      height: 0;
      top: 50%;
      left: 50%;
      position: absolute;
      @include transition(0.5s border-color ease);
    }
    .arrow__up {
      border-bottom: 6px solid #ccc;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      margin-top: -15px;
      margin-left: -6px;
    }
    .arrow__right {
      border-top: 4px solid transparent;
      border-bottom: 4px solid transparent;
      border-left: 6px solid #ccc;
      margin-top: -4px;
      margin-left: 7px;
    }
    .arrow__down {
      border-top: 6px solid #ccc;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      margin-top: 9px;
      margin-left: -6px;
    }
    .arrow__left {
      border-top: 4px solid transparent;
      border-bottom: 4px solid transparent;
      border-right: 6px solid #ccc;
      margin-top: -4px;
      margin-left: -17px;
    }
  }

  .profile {
    position: relative;
    margin-right: $progress-bar-nav-width;
    height: $progress-bar-height;
    background: #ddd;
  }

  .profile__bg {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 80% !important;
  }

  .profile__indicator {
    position: absolute;
    height: 100%;
    background: #B3B3B3;
    opacity: 0.6;
    z-index: 10;
    @include transition-property(left);
    @include transition-duration(1s);
    @include transition-timing-function(ease);
  }

  //////////////////////////////////////
  // Application State
  //////////////////////////////////////

  .is-loading {
    
    .bg {
      * { @include transition(none); }
    }
    
    .bg__back,
    .bg__mid,
    .bg__fore {
      opacity: 0 !important;
    }

    .progress {
      @include transition(none);
    }

  }

  .is-animated {
    
    .bg { 
      
      * {
        @include transition-property(transform opacity left);
        @include transition-duration(1s);
      }

    }
      
    .bg__back {
      @include transition-duration(1.5s);
    }
    
    .bg__mid {
      @include transition-duration(1.25s);
    }

    .bg__fore {
      @include transition-duration(1s);
    }

    .progress {
      @include transition-property(bottom box-shadow);
      @include transition-duration(0.5s);
      @include transition-timing-function(ease-in-out);
    }

  }

  .has-profile-bar {
    .progress {
      bottom: 0;
      box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.2);
    }
    .nav-arrow__down {
      bottom: $progress-bar-height + $nav-arrow-edge-offset;
    }
  }

}

// Responsive

@media only screen and (max-height: 1440px) and (max-width: 2560px) {
  
  [data-layout="enhanced"] {
  
    .bg {
      
      &[data-level-v="1"] {
        .bg__back { @include transform(translate(0, 0%)); }
        .bg__mid  { @include transform(translate(0, 30%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="2"] {
        .bg__back { @include transform(translate(0, 5%)); }
        .bg__mid  { @include transform(translate(0, 15%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="3"]{
        .bg__back { @include transform(translate(0, 8%)); }
        .bg__mid  { @include transform(translate(0, 8%)); }
        .bg__fore { @include transform(translate(0, 0%)); }
      }

    }

  }

}

@media only screen and (max-height: 1080px) and (max-width: 1920px) {
    
  [data-layout="enhanced"] {

    .bg {
      
      &[data-level-v="1"] {
        .bg__back { @include transform(translate(0, 25%)); }
        .bg__mid  { @include transform(translate(0, 40%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="2"] {
        .bg__back { @include transform(translate(0, 27%)); }
        .bg__mid  { @include transform(translate(0, 30%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="3"]{
        .bg__back { @include transform(translate(0, 28%)); }
        .bg__mid  { @include transform(translate(0, 22%)); }
        .bg__fore { @include transform(translate(0, 25%)); }
      }

    }

  }

}

@media only screen and (max-height: 1024px) and (max-width: 1280px) {
  
  [data-layout="enhanced"] {

    .bg {
      
      &[data-level-v="1"] {
        .bg__back { @include transform(translate(0, 38%)); }
        .bg__mid  { @include transform(translate(0, 70%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="2"] {
        .bg__back { @include transform(translate(0, 40%)); }
        .bg__mid  { @include transform(translate(0, 30%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="3"]{
        .bg__back { @include transform(translate(0, 41%)); }
        .bg__mid  { @include transform(translate(0, 28%)); }
        .bg__fore { @include transform(translate(0, 30%)); }
      }

    }

  }

}

@media only screen and (max-height: 768px) and (max-width: 1024px) {
  
  [data-layout="enhanced"] {

    .bg {
      
      &[data-level-v="1"] {
        .bg__back { @include transform(translate(0, 52%)); }
        .bg__mid  { @include transform(translate(0, 78%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="2"] {
        .bg__back { @include transform(translate(0, 54%)); }
        .bg__mid  { @include transform(translate(0, 55%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="3"]{
        .bg__back { @include transform(translate(0, 55%)); }
        .bg__mid  { @include transform(translate(0, 45%)); }
        .bg__fore { @include transform(translate(0, 45%)); }
      }

    }

  }

}

@media only screen and (min-height: 1440px) and (min-width: 2560px) {
    
  [data-layout="enhanced"] {

    .bg {

      &[data-level-v="1"] {
        .bg__back { @include transform(translate(0, 0%)); }
        .bg__mid  { @include transform(translate(0, 30%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="2"] {
        .bg__back { @include transform(translate(0, 5%)); }
        .bg__mid  { @include transform(translate(0, 15%)); }
        .bg__fore { @include transform(translate(0, 100%)); }
      }

      &[data-level-v="3"]{
        .bg__back { @include transform(translate(0, 8%)); }
        .bg__mid  { @include transform(translate(0, 8%)); }
        .bg__fore { @include transform(translate(0, 0%)); }
      }

    }

  }

}